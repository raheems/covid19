
# Bangladesh {#bangladesh}

```{r, echo=FALSE, message=FALSE, warning=FALSE}
# source("covid19_bd.R")
source("covid19_global.R")
```

This report is created based on a publicly available data. The data are available on a Google Sheet. Please see the Data Source section for link. 


## Bangladesh official data (TBD)

Please see the graph below.

## Report based on publicly available data

Please note that publicly available data are __not official__ and __MAY BE UNRELIABLE__. I personally did not verify them. I am using them for educational purposes. Use at your discretion.


```{r, covid19-bangladesh-deaths, fig.width=8, fig.height=7, echo = FALSE, warning=FALSE}

b <- bd_unoff
a <- global %>% filter(country %in% "Bangladesh") %>%
  select(-c(daily_cases, daily_deaths, daily_recov), cum_cases)

bd <- bind_rows(a,b) %>%
  filter(cum_cases >0 ) %>%
  arrange(country, date) %>%
  mutate(
   day = row_number()
  )
  
# Plot

p <- ggplot(bd , aes(x = day, y = cum_deaths, color=country)) +
  geom_line(size=1.1) +
  # geom_text_repel(size=5, aes(label=country),
  #                 function(a) a[ymd(a$date) == max(a$date), ])+
  theme_minimal(base_size = 14) +
  theme(legend.position="top") +
  ggtitle("Bangladesh: COVID19 cumulative deaths",
          data_last_refreshed ) +
  xlab("Day since first confirmed case") +
  ylab("Cumulative deaths") +
  theme(legend.position="top") +
  labs(caption = "SOURCE: https://cutt.ly/StTIxJQ")

p + scale_y_continuous(labels=comma, trans = "log10") 

  # guides(fill=guides(colour=guide_legend(ncol=2,nrow=1,byrow=TRUE)))

```


```{r, echo=FALSE}

bdsummary <- bd %>%
  filter(date == max(date)) %>% 
  group_by(country) %>%
  summarise(
    `Total Deaths` = max(cum_deaths)
  ) %>%
  arrange(desc(`Total Deaths`))
  

bdsummary %>%
  kable(format = "html", caption=paste("Total number of deaths as of ", max(bd$date))) %>%
  kable_styling(position = "center")

```

## Bangladesh in South Asia

### Infection

```{r, incidences-bd-south-asia, fig.width=8, fig.height=7, echo = FALSE, warning=FALSE, message=FALSE}
# source("covid19_deaths.R")

# 
# bd_cases <- bd_unoff %>% filter(country == "Bangladesh(unoff)")
#   select(country, date, cum_cases)

df_south_asia <- global %>%
  filter(
    country %in% c("Bangladesh", "India", "Singapore", "Nepal", "Pakistan",
                   "Bhutan", "Sri Lanka", "Malaysia",
                   "Indonesia")
  ) %>%
  select(country, date, cum_cases) %>%
  group_by(country, date) %>%
  summarize(
    cum_cases = sum(cum_cases)
  )

# Join with BD data
# df_south_asia <- bind_rows(df_south_asia, bd_cases)


n_south_asia <- df_south_asia %>%
  group_by(country) %>%
  summarise(
    max_n = max(cum_cases)
  ) %>%
  arrange(desc(max_n)) %>%
  top_n(10, max_n)


# Combined n countries
# n_south_ais <- rbind(n_world, n_bd)

cases_south_asia <- df_south_asia %>%
  filter(country %in% n_south_asia$country, cum_cases >0) %>%
  arrange(country, cum_cases) %>%
  group_by(country) %>%
  mutate(
    day = row_number()
  )

```

```{r, covid19-cases-south-asia, fig.width=8, fig.height=7, echo = FALSE, warning=FALSE, message=FALSE}
date_data_refreshed = max(cases_south_asia$date)

# Plot
ggplot(cases_south_asia, aes(x = day, y = cum_cases, color=country)) +
  geom_line(size=1.1) +
  geom_point(data = cases_south_asia[cases_south_asia$country == 'Bangladesh' & cases_south_asia$date==max(cases_south_asia$date), ], aes(x=day, y=cum_cases), color='red', size=5) +
  geom_text_repel(size=5, aes(label=country),
                  function(cases_south_asia) cases_south_asia[cases_south_asia$date == max(cases_south_asia$date), ])+
  theme_minimal(base_size = 14) +
  theme(legend.position = "none") +
  # theme_void() + 
  theme(legend.position="none") +
  ggtitle( paste("COVID19 cumulative incidences since first incidence \n(Bangladesh's peers)\n", date_data_refreshed)) +
  xlab("Days since first incidence") +
  ylab("Cumulative cases") +
  labs(caption = "SOURCE: Johns Hopkins Coronavirus Resource Center.")+
  scale_y_continuous(labels=comma, trans = "log10")
```


```{r, echo=FALSE}

# Summary of Infections till date by country

d <- bd %>%
  select(country, date, cum_cases)

df_south_asia <- global %>%
  filter(
    country %in% c("India", "Singapore", "Nepal", "Pakistan",
                   "Bhutan", "Sri Lanka", "Malaysia", 
                   "Indonesia")
  ) %>%
  select(country, date, cum_cases) %>%
  group_by(country, date) %>%
  summarize(
    cum_cases = sum(cum_cases)
  )

df_south_asia <- bind_rows(df_south_asia, d)

n_south_asia <- df_south_asia %>%
  group_by(country) %>%
  summarise(
    max_n = max(cum_cases)
  ) %>%
  arrange(desc(max_n)) %>%
  top_n(20, max_n)


sa_summary_cases <- df_south_asia %>%
  group_by(country) %>%
  summarise(
    `Total Cases` = max(cum_cases)
  ) %>%
  arrange(desc(`Total Cases`))

sa_summary_cases %>%
  kable(format = "html", caption=paste("Total number of cases as of ", date_data_refreshed)) %>%
  kable_styling(position = "center")

```

### Deaths

```{r, southasia-deaths, fig.width=8, fig.height=7, echo = FALSE, warning=FALSE, message=FALSE}

d <- bd %>%
  select(country, date, cum_cases, cum_deaths)

df_south_asia <- global %>%
  select(country, date, cum_deaths, cum_cases) %>%
  filter(
    country %in% c("India", "Singapore", "Nepal", "Pakistan",
                   "Bhutan", "Sri Lanka", "Malaysia", 
                   "Indonesia"),
    cum_cases > 0
  ) %>%
  group_by(country, date) %>%
  summarize(
    cum_deaths = sum(cum_deaths),
    cum_cases = sum(cum_cases)
  )

df_south_asia <- bind_rows(df_south_asia, d)

n_south_asia <- df_south_asia %>%
  group_by(country) %>%
  summarise(
    max_n = max(cum_deaths)
  ) %>%
  arrange(desc(max_n)) %>%
  top_n(10, max_n)


# Combined n countries
# n_south_ais <- rbind(n_world, n_bd)

deaths_south_asia <- df_south_asia %>%
  filter(country %in% n_south_asia$country) %>%
  arrange(country, cum_deaths) %>%
  group_by(country) %>%
  mutate(
    day = row_number()
  )


```


```{r, covid19-death-south-asia, fig.width=8, fig.height=7, echo = FALSE, warning=FALSE, message=FALSE}

max_date_bd_unoff <- deaths_south_asia %>%
  filter(country == "Bangladesh(unoff)") %>% group_by(country) %>%
  summarise(date=max(date))

max_date_bd_off <- deaths_south_asia %>%
  filter(country == "Bangladesh") %>% group_by(country) %>%
  summarise(date=max(date))

# Plot
ggplot(deaths_south_asia, aes(x = day, y = cum_deaths, color=country)) +
  geom_line(size=1.1) +
  geom_point(data = deaths_south_asia[deaths_south_asia$country == 'Bangladesh' & deaths_south_asia$date==max_date_bd_off$date, ], aes(x=day, y=cum_deaths), color='red', size=5) +
  geom_point(data = deaths_south_asia[deaths_south_asia$country == 'Bangladesh(unoff)' & deaths_south_asia$date==max_date_bd_unoff$date, ], aes(x=day, y=cum_deaths), color='red', size=5) +
  geom_text_repel(size=5, aes(label=country),
                  function(deaths_south_asia) deaths_south_asia[deaths_south_asia$date == max_date_bd_off$date, ])+
  # theme_minimal(base_size = 14, base_family="Siyam Rupali") +
  theme_minimal(base_size = 14) +
  theme(legend.position = "none") +
  # theme_void() + 
  theme(legend.position="none") +
  ggtitle( paste("COVID19 cumulative incidences since first incidence \n(Bangladesh's peers)", date_data_refreshed)) +
  xlab("Days since first incidence") +
  ylab("Cumulative deaths") +
  labs(caption = "SOURCE: Johns Hopkins Coronavirus Resource Center")+
  scale_y_continuous(labels=comma, trans = "log10")

```


```{r, echo=FALSE}

# Summary of deaths till date by country
sa_summary <- deaths_south_asia %>%
  filter(date == max(date)) %>%
  group_by(country) %>%
  summarise(
    `Total Deaths` = max(cum_deaths)
  ) %>%
  arrange(desc(`Total Deaths`))

sa_summary %>%
  kable(format = "html", caption=paste("Total number of deaths as of ", date_data_refreshed)) %>%
  kable_styling(position = "center")

```


### Cases and deaths compared on a specific day

```{r, echo=FALSE}
bd_day_indicator = df_world_bd %>% filter(country == 'Bangladesh', 
                                                date == max(date)) %>%
  pull(day)
```
Bangladesh has entered on day `r bd_day_indicator` since first confirmed case.


```{r, echo=FALSE}

# Summary of deaths till date by country on the specific day


bd_sa_summary <- df_south_asia %>%
  group_by(country) %>%
  mutate(
   day = row_number()
  ) %>%
  filter(day == bd_day_indicator) %>%
  group_by(country) %>%
  summarise(
    `Total cases` = max(cum_cases),
    `Total deaths` = max(cum_deaths),
    Country = country
  ) %>%
  select(Country, `Total cases`, `Total deaths`) %>%
  arrange(desc(`Total deaths`))

bd_sa_summary %>%
  kable(format = "html", caption=paste0("Bangladesh and its peers: Total cases and deaths compared on day ", bd_day_indicator)) %>%
  kable_styling(position = "center") %>%
  row_spec(which(bd_sa_summary$Country %in% c('Bangladesh', 'Bangladesh(unoff)')), bold = T, color = "white", background = "#f49a86")


```

