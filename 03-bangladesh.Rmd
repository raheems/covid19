
# Bangladesh {#bangladesh}

```{r, echo=FALSE, message=FALSE, warning=FALSE}
source("covid19_bd.R")
```

This report is created based on a publicly available data. The data are available on a Google Sheet. Please see the Data Source section for link. 


## Bangladesh official data (TBD)

Please see the graph below.

## Report based on publicly available data

Please note that publicly available data are __not official__ and __MAY BE UNRELIABLE__. I personally did not verify them. I am using them for educational purposes. Use at your discretion.


```{r, covid19-bangladesh, fig.width=8, fig.height=7, echo = FALSE, warning=FALSE}
a <- df_ %>% filter(!varname %in% c("cum_tests", "cum_change_deaths_susp",
                                    "cum_change_deaths_govt") )

# Plot
p <- ggplot(a, aes(x = date, y = cum_cases, color=varname)) +
  geom_line(size=1.1) +
  geom_text_repel(size=5, aes(label=comma_format()(cum_cases)),
                  function(a) a[ymd(a$date) == data_last_refreshed, ])+
  theme_minimal(base_size = 14) +
  theme(legend.position="top") +
  ggtitle("Bangladesh: COVID19 cumulative cases\n(SUSPECTED cases are UNOFFICIAL)",
          data_last_refreshed ) +
  xlab("Date") +
  ylab("Cumulative cases") +
  theme(legend.position="top") +
  labs(caption = "SOURCE: https://cutt.ly/StTIxJQ")

p + scale_y_continuous(labels=comma, trans = "log10") +
  scale_color_discrete(name="Type",
                       breaks=c("cum_deaths_suspected", 
                                "cum_deaths_govt",
                                "cum_change_deaths_susp",
                                "cum_change_deaths_govt"),
                       
                       labels=c("Deaths (suspected)", 
                                "Deaths (confirmed)", 
                                "Daily change (suspected)",
                                "Daily change (confirmed)")
)
  # guides(fill=guides(colour=guide_legend(ncol=2,nrow=1,byrow=TRUE)))

```

```{r, echo=FALSE, message=FALSE}
# Bangladesh summary table

df %>%
  arrange(date) %>%
  summarise(
    `Total Deaths (Official)` = max(cum_deaths_govt)
    , `Total Deaths (Suspected)` = max(cum_deaths_suspected, na.rm = TRUE)
    , `Total Tests` = max(total_tests, na.rm = TRUE)
  ) %>% kable(caption=paste("Bangladesh summary as of ", data_last_refreshed))

```


## Bangladesh in South Asia

### Infection

```{r, incidences-bd-south-asia, fig.width=8, fig.height=7, echo = FALSE, warning=FALSE, message=FALSE}
source("covid19_deaths.R")

df_south_asia <- jhu_confirmed_global %>%
  rename(province = "Province/State", 
         country = "Country/Region") %>% 
  # Exclude China
  filter(
    country %in% c("Bangladesh", "India", "Singapore", "Nepal", "Pakistan",
                   "Bhutan", "Sri Lanka", "Malaysia", "Maldives", 
                   "Indonesia", "Uganda")
  ) %>%
  pivot_longer(-c(province, country, Lat, Long), 
               names_to = "Date", values_to = "cum_dead") %>%
  select(country, Date, cum_dead) %>%
  group_by(country, Date) %>%
  summarize(
    cum_dead = sum(cum_dead)
  )


n_south_asia <- df_south_asia %>%
  group_by(country) %>%
  summarise(
    max_n_dead = max(cum_dead)
  ) %>%
  arrange(desc(max_n_dead)) %>%
  top_n(10, max_n_dead)


# Combined n countries
# n_south_ais <- rbind(n_world, n_bd)

dead_south_asia <- df_south_asia %>%
  filter(country %in% n_south_asia$country, cum_dead >0) %>%
  arrange(country, cum_dead) %>%
  group_by(country) %>%
  mutate(
    id = row_number()
  )

```

```{r, covid19-cases-south-asia, fig.width=8, fig.height=7, echo = FALSE, warning=FALSE, message=FALSE}
date_data_refreshed = ymd(max(mdy(dead_south_asia$Date)))

# Plot
ggplot(dead_south_asia, aes(x = id, y = cum_dead, color=country)) +
  geom_line(size=1.1) +
  geom_point(data = dead_south_asia[dead_south_asia$country == 'Bangladesh' & mdy(dead_south_asia$Date)==date_data_refreshed, ], aes(x=id, y=cum_dead), color='red', size=5) +
  geom_text_repel(size=5, aes(label=country),
                  function(df) df[mdy(df$Date) == date_data_refreshed, ])+
  theme_minimal(base_size = 14) +
  theme(legend.position = "none") +
  # theme_void() + 
  theme(legend.position="none") +
  ggtitle( paste("COVID19 cumulative incidences since first incidence \n(Bangladesh's peers)\n", date_data_refreshed)) +
  xlab("Days since first incidence") +
  ylab("Cumulative cases") +
  labs(caption = "SOURCE: Johns Hopkins Coronavirus Resource Center.")+
  scale_y_continuous(labels=comma, trans = "log10")
```



### Deaths
```{r, fig.width=8, fig.height=7, echo = FALSE, warning=FALSE, message=FALSE}
source("covid19_deaths.R")

df_south_asia <- jhu_deaths_global %>%
  rename(province = "Province/State", 
         country = "Country/Region") %>% 
  # Exclude China
  filter(
    country %in% c("Bangladesh", "India", "Singapore", "Nepal", "Pakistan",
                   "Bhutan", "Sri Lanka", "Malaysia", "Maldives", 
                   "Indonesia", "Uganda")
  ) %>%
  pivot_longer(-c(province, country, Lat, Long), 
               names_to = "Date", values_to = "cum_dead") %>%
  select(country, Date, cum_dead) %>%
  group_by(country, Date) %>%
  summarize(
    cum_dead = sum(cum_dead)
  )


n_south_asia <- df_south_asia %>%
  group_by(country) %>%
  summarise(
    max_n_dead = max(cum_dead)
  ) %>%
  arrange(desc(max_n_dead)) %>%
  top_n(10, max_n_dead)


# Combined n countries
# n_south_ais <- rbind(n_world, n_bd)

dead_south_asia <- df_south_asia %>%
  filter(country %in% n_south_asia$country, cum_dead >0) %>%
  arrange(country, cum_dead) %>%
  group_by(country) %>%
  mutate(
    id = row_number()
  )

```


```{r, covid19-death-south-asia, fig.width=8, fig.height=7, echo = FALSE, warning=FALSE, message=FALSE}
date_data_refreshed = ymd(max(mdy(dead_south_asia$Date)))

# Plot
ggplot(dead_south_asia, aes(x = id, y = cum_dead, color=country)) +
  geom_line(size=1.1) +
  geom_point(data = dead_south_asia[dead_south_asia$country == 'Bangladesh' & mdy(dead_south_asia$Date)==date_data_refreshed, ], aes(x=id, y=cum_dead), color='red', size=5) +
  geom_text_repel(size=5, aes(label=country),
                  function(df) df[mdy(df$Date) == date_data_refreshed, ])+
  theme_minimal(base_size = 14) +
  theme(legend.position = "none") +
  # theme_void() + 
  theme(legend.position="none") +
  ggtitle( paste("COVID19 cumulative deaths since first death \n(Bangladesh's peers)\n", date_data_refreshed)) +
  xlab("Days since first death") +
  ylab("Cumulative deaths") +
  labs(caption = "SOURCE: Johns Hopkins Coronavirus Resource Center.")+
  scale_y_continuous(labels=comma, trans = "log10")
```


```{r, echo=FALSE}

# Summary of deaths till date by country
sa_summary <- dead_south_asia %>%
  filter(mdy(Date) == date_data_refreshed) %>%
  group_by(country) %>%
  summarise(
    TotalDeath = max(cum_dead)
  ) %>%
  arrange(desc(TotalDeath))

sa_summary %>%
  kable(format = "html", caption=paste("Total number of deaths as of ", date_data_refreshed)) %>%
  kable_styling(position = "center")

```


